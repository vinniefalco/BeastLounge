#
# Copyright (c) 2013-2019 Vinnie Falco (vinnie dot falco at gmail dot com)
#
# Distributed under the Boost Software License, Version 1.0. (See accompanying
# file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
#
# Official repository: https://github.com/boostorg/beast
#

language: cpp
addons:
  apt:
    sources: &base_sources
      - ubuntu-toolchain-r-test

matrix:
  include:
    - os: linux
      dist: xenial
      addons:
        apt:
          packages:
            - g++-7
          sources:
            - *base_sources
      compiler: g++-7
      before_install: # Travis overwrite these, if we use env
        - export CXX=g++-7
        - export CC=gcc-7

    - os: linux
      dist: xenial
      # addons:
      #     apt:
      #       sources:
      #         - llvm-toolchain-precise-3.9
      #       packages:
      #         - clang-3.9
      compiler: clang++
      # before_install:
      #   - export CXX=clang
      #   - export CC=clang
      #   - export CXX_FLAGS="-stdlib=libstdc++"

install:
  - cd ..
  - $TRAVIS_BUILD_DIR/tools/get-boost.sh $TRAVIS_BRANCH $TRAVIS_BUILD_DIR
  - cd $TRAVIS_BUILD_DIR

script:
  - cmake -H. -Bbuild
  - make -C build all test

notifications:
  email:
    on_success: never
